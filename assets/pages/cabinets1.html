<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arm√°rio 1</title>
    <link rel="stylesheet" href="../css/style.css">

    <!-- Firebase v12 M√≥dulos -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCB44213O-GvromzmBPXwcinKvles_cHjQ",
            authDomain: "sistema-de-logistica-senai.firebaseapp.com",
            projectId: "sistema-de-logistica-senai",
            storageBucket: "sistema-de-logistica-senai.firebasestorage.app",
            messagingSenderId: "880816206545",
            appId: "1:880816206545:web:5ba5ce825e23c0fbcc8bf0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // üîπ Fun√ß√£o para salvar no banco
        window.salvarEstoque = (cabinetId, cellId, produto, quantidade) => {
            set(ref(db, `cabinets/${cabinetId}/${cellId}`), {
                produto: produto,
                quantidade: quantidade
            });
        };

        // üîπ Fun√ß√£o para ouvir atualiza√ß√µes em tempo real
        window.ouvirEstoque = (cabinetId, atualizarUI) => {
            const cabinetRef = ref(db, `cabinets/${cabinetId}`);
            onValue(cabinetRef, (snapshot) => {
                const dados = snapshot.val();
                if (dados) atualizarUI(dados);
            });
        };
    </script>
</head>

<body id="bodyCabinet1" class="bodyPageCabinet">

    <header id="headerPageCabinet1" class="headerPageCabinet">
        <a class="buttonBackHeader" href="/mainPage.html">
            <img src="../images/backHeaderCabinet.png" alt="home">
        </a>
        <div class="title">
            <h1>ARM√ÅRIO 1</h1>
        </div>
    </header>

    <div class="containerCabinet">
        <!-- CELLS -->
        <div class="cabinetColumn1">
            <div id="cell1Column1Cabinet1" class="cell cellYellow" onclick="abrirPopup(this)" data-product="Fus√≠vel"
                data-amount="25">
                <h3>Fus√≠vel</h3>
                <p>25</p>
            </div>
            <div id="cell2Column1Cabinet1" class="cell cellYellow" onclick="abrirPopup(this)"
                data-product="Rel√© acoplador" data-amount="43">
                <h3>Rel√© acoplador</h3>
                <p>43</p>
            </div>
            <div id="cell3Column1Cabinet1" class="cell cellYellow" onclick="abrirPopup(this)"
                data-product="Chave alavanca" data-amount="12">
                <h3>Chave alavanca</h3>
                <p>12</p>
            </div>
            <div id="cell4Column1Cabinet1" class="cell cellRed" onclick="abrirPopup(this)"
                data-product="Cilindro pneum√°tico" data-amount="9">
                <h3>Cilindro pneum√°tico</h3>
                <p>9</p>
            </div>
        </div>

        <div class="cabinetColumn2">
            <div id="cell1Column2Cabinet1" class="cell cellRed" onclick="abrirPopup(this)"
                data-product="Marcador de cabo" data-amount="7">
                <h3>Marcador de cabo</h3>
                <p>7</p>
            </div>
            <div id="cell2Column2Cabinet1" class="cell cellRed" onclick="abrirPopup(this)"
                data-product="Sensor capacitivo" data-amount="9">
                <h3>Sensor capacitivo</h3>
                <p>9</p>
            </div>
            <div id="cell3Column2Cabinet1" class="cell cellYellow" onclick="abrirPopup(this)"
                data-product="Sensor de fim de curso" data-amount="14">
                <h3>Sensor de fim de curso</h3>
                <p>14</p>
            </div>
            <div id="cell4Column2Cabinet1" class="cell cellRed" onclick="abrirPopup(this)" data-product="Sinaleiro azul"
                data-amount="5">
                <h3>Sinaleiro azul</h3>
                <p>5</p>
            </div>
        </div>

        <div class="cabinetColumn3">
            <div id="cell1Column3Cabinet1" class="cell cellRed" onclick="abrirPopup(this)"
                data-product="Sinaleiro verde" data-amount="4">
                <h3>Sinaleiro verde</h3>
                <p>4</p>
            </div>
            <div id="cell2Column3Cabinet1" class="cell cellRed" onclick="abrirPopup(this)"
                data-product="Sinaleiro branco" data-amount="6">
                <h3>Sinaleiro branco</h3>
                <p>6</p>
            </div>
            <div id="cell3Column3Cabinet1" class="cell cellGreen" onclick="abrirPopup(this)"
                data-product="Dobradi√ßa de acr√≠lico" data-amount="69">
                <h3>Dobradi√ßa de acr√≠lico</h3>
                <p>69</p>
            </div>
            <div id="cell4Column3Cabinet1" class="cell cellGreen" onclick="abrirPopup(this)"
                data-product="Terminal de fio" data-amount="123">
                <h3>Terminal de fio</h3>
                <p>123</p>
            </div>
        </div>
    </div>

    <footer>
        <div>
            <p>Desenvolvido pelos alunos do M√≥dulo III do Curso T√©cnico em Desenvolvimento de Sistemas em 2025 - todos
                os direitos reservados ¬©</p>
        </div>
        <div>
            <img src="../images/senailogo.png" alt="logomarca SENAI">
        </div>
    </footer>

    <!-- Script principal -->
    <script src="../js/script.js" defer></script>
</body>

</html>